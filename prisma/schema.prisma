generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Aluno {
  matricula   String       @id
  aluno       String
  turma       String
  turno       String
  createdAt   DateTime     @default(now()) @db.Timestamptz(3)
  updatedAt   DateTime     @default(now()) @updatedAt @db.Timestamptz(3)
  ocorrencias Ocorrencia[]
}

model Ocorrencia {
  codigo    String   @id
  situacao  String   @default("Registrada")
  data      DateTime @db.Timestamptz(3)
  medida    String
  descricao String
  alunoId   String
  createdAt DateTime @default(now()) @db.Timestamptz(3)
  updatedAt DateTime @default(now()) @updatedAt @db.Timestamptz(3)
  aluno     Aluno    @relation(fields: [alunoId], references: [matricula], onDelete: Cascade)

  @@index([alunoId])
}
